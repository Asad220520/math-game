<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Math Battle Pro (Firebase)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="lobby-overlay" class="modal-overlay">
        <div class="modal-card">
            <h1>Math Battle</h1>
            <p class="muted">Введите код игры или создайте новую.</p>
            
            <input type="text" id="game-code-input" placeholder="Введите код (4 цифры)" maxlength="4">

            <div class="modal-actions">
                <button class="btn secondary" onclick="window.game.createGame()">Создать игру</button>
                <button class="btn primary" onclick="window.game.joinGame()">Присоединиться</button>
            </div>

            <p class="muted" id="lobby-status" style="margin-top: 20px;">Ожидание...</p>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-card">
            <h1 id="winner-title">ПОБЕДА!</h1>
            <p class="muted">Нажмите "Начать заново", чтобы вернуться в лобби.</p>
            <div class="modal-actions">
                <button class="btn primary" onclick="window.game.resetToLobby()">Начать заново</button>
            </div>
        </div>
    </div>

    <div class="game-root" id="game-root" style="display: none;">
        
        <div class="hud">
            <div class="progress-wrap">
                <div class="progress-fill" id="progress-fill"></div>
                <div class="vs-badge" id="vs-badge">VS</div>
            </div>
            <div class="timer" id="timer-display">Время: 15</div>
        </div>

        <div class="player-zone red" style="order: 0;">
            <div class="panel">
                <h2 class="team-name" id="team-name-red">СОПЕРНИК (КРАСНЫЕ)</h2>
                <div class="score" id="score-red">Очки: 0</div>
                <div class="problem" id="problem-red">? + ?</div>
                <div class="answer" id="answer-red">...</div>
                
                <div class="numpad" id="numpad-red" style="display: none;">
                    <button onclick="window.game.addNumber('red', 1)">1</button>
                    <button onclick="window.game.addNumber('red', 2)">2</button>
                    <button onclick="window.game.addNumber('red', 3)">3</button>
                    <button onclick="window.game.addNumber('red', 4)">4</button>
                    <button onclick="window.game.addNumber('red', 5)">5</button>
                    <button onclick="window.game.addNumber('red', 6)">6</button>
                    <button onclick="window.game.addNumber('red', 7)">7</button>
                    <button onclick="window.game.addNumber('red', 8)">8</button>
                    <button onclick="window.game.addNumber('red', 9)">9</button>
                    <button onclick="window.game.clearInput('red')" class="btn-clear">C</button>
                    <button onclick="window.game.addNumber('red', 0)">0</button>
                    <button onclick="window.game.submitAnswer('red')" class="btn-enter">OK</button>
                </div>
            </div>
        </div>

        <div class="player-zone blue" style="order: 1;">
            <div class="panel">
                <h2 class="team-name" id="team-name-blue">ВЫ (СИНИЕ)</h2>
                <div class="score" id="score-blue">Очки: 0</div>
                <div class="problem" id="problem-blue">? + ?</div>
                <div class="answer" id="answer-blue">...</div>
                
                <div class="numpad" id="numpad-blue" style="display: none;">
                    <button onclick="window.game.addNumber('blue', 1)">1</button>
                    <button onclick="window.game.addNumber('blue', 2)">2</button>
                    <button onclick="window.game.addNumber('blue', 3)">3</button>
                    <button onclick="window.game.addNumber('blue', 4)">4</button>
                    <button onclick="window.game.addNumber('blue', 5)">5</button>
                    <button onclick="window.game.addNumber('blue', 6)">6</button>
                    <button onclick="window.game.addNumber('blue', 7)">7</button>
                    <button onclick="window.game.addNumber('blue', 8)">8</button>
                    <button onclick="window.game.addNumber('blue', 9)">9</button>
                    <button onclick="window.game.clearInput('blue')" class="btn-clear">C</button>
                    <button onclick="window.game.addNumber('blue', 0)">0</button>
                    <button onclick="window.game.submitAnswer('blue')" class="btn-enter">OK</button>
                </div>
            </div>
        </div>

    </div>

    <audio id="sound-correct-1" src="correct_1.mp3"></audio>
    <audio id="sound-correct-2" src="correct_2.mp3"></audio>
    <audio id="sound-correct-3" src="correct_3.mp3"></audio>
    <audio id="sound-error-1" src="error_1.mp3"></audio>
    <audio id="sound-error-2" src="error_2.mp3"></audio>
    <audio id="sound-error-3" src="error_3.mp3"></audio>

    <script type="module" src="firebase-init.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>